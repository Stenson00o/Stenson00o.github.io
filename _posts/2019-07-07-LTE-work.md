---
layout: post
title:	 LTE 工作模式
category: 通信
tags: 通信
description: LTE 工作模式，一些关键字
---
4G作为第四代移动通信技术，有着无法比拟的优越性，它能够快速传输语音、文本、视频和图像信息，能够满足几乎所有用户对于无线服务的要求，
国际电信联盟对于4G系统的标准为符合100 Mbit/s数据传输速度的系统，当之无愧的被称为机器之间的高速对话。LTE（Long Term Evolution）
主要研究3GPP无线接入网的长期演进技术，升级版的LTE Advanced将最终满足国际电信联盟对4G系统的要求，
SAE（System Architecture Evolution）则是研究核心网的长期演进，它定义了一个全IP的分组核心网EPC（Evolved Packet Core），
该系统的特点为仅有分组域而无电路域、基于全IP结构、控制与承载分离且网络结构扁平化，
其中主要包含MME、SGW、PGW、PCRF等网元。其中SGW和PGW常常合设并被称为SAE-GW

+ EPC；分组核心网EPC（Evolved Packet Core）

+ EPC主要由MME、SGW、PGW、PCRF等网元构成。其中：
+ MME：Mobility Management Entity，原3G网络中SGSN网元的控制面功能；
+ SGW：Serving Gateway，原3G网络中SGSN网元的用户面功能，有时也写为S-GW；
+ PGW：PDN Gateway，原3G网络中GGSN网元的功能，有时也写为P-GW；
+ PCRF：Policy and Charging Rules Function，完成对用户数据报文的策略和计费控制。

VoIP
上面我们提到多个通讯行业的国际标准化组织，他们这么多年做的大量工作，就是为了让4G这个纯IP网络化的移动通讯网络，能让语音在共享的数据网络上（PS，即包交换），
能象从前在独占的语音网络上（CS，即电路交换）跑的一样遛，他们想到了VoIP。
VoIP里面有许多标准，Skype是私有的，H323是通讯行业的标准，SIP是IETF也就是互联网组织定的，
为什么通讯行业定未来下一个几十年的标准时，不是从他们自己的H323上面发展，而是选互联网行业标准组织IETF提出的SIP标准呢？大家都笑而不语……
但互联网的原则是开放，还有一个就是免费，所以SIP在脱离于通讯行业标准约束时，
非常自由，对于不同供应商提供的SIP服务之间的结算啊、费用啊之类的没有通讯行业那么细——说白了，就是SIP提供的许多服务都是免费的，要想收费不太好下手，由此，3GPP等等一众通讯行业的标准化组织，在SIP基础上，提出了IMS，到此，我们标题里说的SIP、VoIP、VoLTE、IMS这些名词全部出场了。
VoIP解释起来简单，就是Voice on IP，语
音跑在IP网络上，就是VoIP，这是一个比较上层的统称的名词，那么同样的VoLTE也只是说语音跑在LTE网络上——LTE就是指的4G的两个标准，
TD-LTE、FDD-LTE——需要注意的是，TD-LTE和TD-SCDMA没有任何关系，其它的我就不多说了。
LTE全称是Long Time Evolution，从名字上就知道，4G这个东西提出的很匆忙，许多东西还没定好就被运营商急着要上线。
IMS
而IMS这个东西就要复杂的多了，虽然SIP很好理解，大家暗地里可能也用了好多年的VoIP，对SIP也很熟悉了，它本质上就是一个服务器，放账号，大家注册上去就能打电话，很简单吧，但要收费呢，
VoIP一般也只提供了便宜的网络电话，按时长或者包月收费，没有增值服务——这对于移动通讯运营商来说可是不能忍受的。 来电显示为什么不能收费？为什么彩铃不能收费？
为什么留言不能收费？为什么为什么？
所以，IMS干的第一件是，就是加入了一个HSS子服务（Home Subscriber Server），这个是什么东西呢？SIP虽然也分为注册服务器Register Server、呼叫代理服务器Proxy Server，
但SIP的注册服务器只是记录一下一个SIP账号的当前的IP地址数据、认证一下账号密码是不是正确；但IMS里的HSS就不简单了，
他是在SIP的注册服务器基础上，增加了一个很明显的运营商特征——业务订购数据库，
也就是在移动开手机卡时，那一堆附加增值服务，好了，你在这里可以看到来电显示业务、呼叫等待业务、彩铃业务……，的开关——也意味着收费的计费点；
因为VoIP很简单，一般是企业内部用，或者小规模的虚拟运营商在有限的几台服务器上提供服务，所以VoIP的SIP软件、SIP电话机网关就可以直接通过IP地址和账号就能注册上去，
然后呼叫在多台服务器上互相路由就可以完成呼叫的目的了，这些服务器，一般就是SIP Proxy Server，涉及到和固定电话、手机号码互通时，会有FXO网关，E1网关等负责转换，这里不多说了。
而IMS作为运营商的方案，动辄上亿用户规模，而且又分为各省市地分公司，当然，还有一个不得不提的，漫游——IP还区分漫游？VoIP不是宣传不区分本地长途，没有漫游的概念么？
是的，但IMS认为这样不行，所以，他要加入漫游的概念……
SIP
IMS的核心是SIP，所以类似SIP Proxy Server这么重要的核心组件，IMS是不会少的，IMS里称它为Call Session Control Function，即CSCF，并且又把它分成了多个子系统，
其中代理CSCF（P-CSCF）从用户终端角度看，基本就是SIP里的Proxy Server了（但其实不是，下述），负责直接与IMS的终端（
类似SIP的软电话、硬件电话等等，但同样的，也扩展了不少东西，这里跳过不述）；
P-CSCF直接与终端交互，可能会把SIP进行压缩或者加密，然后就交给查询CSCF（I-CSCF），
I-CSCF会查询HSS数据，来对用户名和密码进行认证，当然，他也从HSS里查询你是否欠费了，开通或关闭了某些业务，以及你是从哪个P-CSCF来的，用来判断你是不是漫游。
整个呼叫过程中，P-CSCF是不做复杂工作的，P-CSCF只负责接收SIP消息，它相当于是对外联络点，然后SIP消息会到达I-CSCF，I-CSCF是运营商的核心网络——就是运营商内部网络的入口，
他会根据HSS查找到用户是属于哪个地区的，会对应分配一个空闲的为该地区服务的服务CSCF（S-CSCF），一直到了这里，S-CSCF才是真正的VoIP里Proxy Server的角色，
S-CSCF完成用户注册认证和呼叫的路由处理，以及电话业务的触发（IMS称为AS，另外独立成一个子系统，下述）。
所以如果综合来分析，P-CSCF和I-CSCF只是起到一个边界安全防护SBC服务器和负载平衡、服务器分流这一类功能，
真正处理SIP注册和呼叫的原先VoIP里标准逻辑的组件，是S-CSCF，从物理上看，P-CSCF可能是全国或省一级中心统一的服务器集群，
配合更多的I-CSCF服务器分布在主干核心网上做分流，背靠一个大的HSS服务器群，将不同市县的用户分配到各地的S-CSCF上进行实际的处理，
并且S-CSCF会更多地与当地的通讯机房里原有的2G、3G发生交流，也就是媒体网关（MGW），负责把新的走4G的手机终端和旧的3G、2G以及固定电话之类的对接起来，保
持兼容（也就是PS、CS域的互通）。
所以，一个最最精简的IMS系统，它的核心组件是包含HSS、CSCF（P、I、S）即可，
即把VoIP SIP的核心Register和Proxy Server进行按运营需求的发展。
MGW
MGW，其实就是市面上大量被使用的VoIP的模拟网关，数字中继网关，而已
……当然，运营商对稳定性要求需要更高一些，并且需要额外的集中管理和控制能力